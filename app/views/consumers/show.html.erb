<% unless @consumer.latitude.nil? %>

<style>
      #map-canvas {
        width:390px;
       height: 350px;   
     }
   </style>
   <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>

    <script>
    function initialize() {
      var mapOptions = {
        zoom: 10,
        center: new google.maps.LatLng(<%= @consumer.latitude %>, <%= @consumer.longitude %>)
      };

      var map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);

      var marker = new google.maps.Marker({
        position: map.getCenter(),
        map: map,
        title: 'Click to zoom'
      });

      google.maps.event.addListener(map, 'center_changed', function() {
        // 3 seconds after the center of the map has changed, pan back to the
        // marker.
        window.setTimeout(function() {
          map.panTo(marker.getPosition());
        }, 3000);
      });

      google.maps.event.addListener(marker, 'click', function() {
        map.setZoom(8);
        map.setCenter(marker.getPosition());
      });
    }

    google.maps.event.addDomListener(window, 'load', initialize);

        </script>
<% end %>    
    
<div class="main">

    <div class="container">

      <div class="row">
        
    <div class="span12">          
          
          <div class="widget stacked ">
            
            <div class="widget-header">
              <i class="icon-pencil"></i>
              <h3>Show Reading</h3>
          </div> <!-- /widget-header -->
        
        <div class="widget-content">
        
        
        <section id="tables">
          
          
          
          
          
          <table class="table table-bordered table-striped">
                    
                    <tbody>
                      
                  
                  
                  <tr>
                        <td>Name:</td>
                        <td><%= @consumer.name rescue nil  %></td>
                        <td rowspan="18" align="left" valign="top" style="text-align:center; vertical-align: top;">
                      
                        <% unless @consumer.image.url.nil? %>
                        <%= image_tag @consumer.image.url,:width => 400, :height => 400 rescue nil %>
                        <% end %>
                  
                 
                        <% unless @consumer.latitude.nil? %>
                            <div id="map-canvas" class="map_container"></div>
                        <% end %>
                  
                        </td>
                  </tr>
                  
                  <tr>
                        <td>Zone:</td>
                        <td>Â <%= @consumer.zone.zone_name rescue nil  %></td>
                  </tr>
                  
                  <tr>
                        <td>MRU:</td>
                        <td> <%= @consumer.sub_zone.name rescue nil  %> </td>
                  </tr>

                  
                  
                  

                  <tr>
                        <td>Consumer Index Number:</td>
                        <td><%= @consumer.consumer_inxex_no rescue nil  %></td>
                        </tr>
                  
                  <tr>
                        <td>Meter Number:</td>
                        <td><%= @consumer.meter_no rescue nil  %></td>
                        </tr>
                  <tr>
                    <td>New Meter Number:</td>
                   <td> <%= @consumer.new_meter_no rescue nil  %></td>

                    </tr>
                  <tr>
                    <td>Current Meter Reading:</td>
                    <td><%= @consumer.current_meter_reading rescue nil  %></td>
                    </tr>
                  <tr>
                    <td>Meter Status:</td>
                    <td><%= @consumer.meter_status rescue nil  %></td>
                    </tr>
                  <tr>
                    <td>Meter Status Description:</td>
                    <td><%= @consumer.meter_status_desc rescue nil  %> </td>
                    </tr>
                  <tr>
                    <td>Remarks:</td>
                    <td> <%= @consumer.remarks rescue nil  %></td>
                  </tr>
                  
                  <tr>
                    <td>Contact Number:</td>
                    <td><%= @consumer.contact_no rescue nil  %></td>
                  </tr>
                  
                  <tr>
                    <td>Walk ID:</td>
                    <td><%= @consumer.walk_id rescue nil  %></td>
                  </tr>
                  
                   <tr>
                      <td>Mr Name:</td>
                      <td><%= @consumer.mr_name rescue nil  %></td>
                    </tr>
                  
                  <tr>
                    <td>MR Code:</td>
                    <td><%= @consumer.mr_code rescue nil  %></td>
                  </tr>
                  
                  <tr>
                    <td>Billing Cycle:</td>
                    <td><%= @consumer.billing_cycle rescue nil  %></td>
                  </tr>
                  
                  <tr>
                    <td>Address:</td>
                    <td><%= @consumer.consumer_address rescue nil  %></td>
                  </tr>
                  
                  <tr>
                    <td>Category:</td>
                    <td><%= @consumer.category rescue nil  %></td>
                  </tr>
                  
                
                  </tr>
                      <td colspan="2"><%= link_to "Edit",edit_consumer_path(@consumer), :class=>"btn" %>
                      <%= link_to "Back",consumers_path, :class=>"btn" %>
                      </td>
                 </tr>
                      
                    </tbody>
            </table>         
                  
          </section>   
          
        </div> <!-- /widget-content -->
          
      </div> <!-- /widget -->
          
      </div>
        
      </div> <!-- /row -->

    </div> <!-- /container -->
    
</div> <!-- /main -->
    
